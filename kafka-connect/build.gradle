dependencies {
  implementation libs.bundles.iceberg
  implementation libs.bundles.jackson
  implementation libs.avro
  implementation libs.slf4j
  compileOnly libs.bundles.kafka.connect

  // REST catalog needs this when loading the FileIO
  // TODO: remove with upgrade to Iceberg 1.3
  runtimeOnly libs.hadoop.common

  testImplementation libs.junit.api
  testRuntimeOnly libs.junit.engine

  testImplementation libs.mockito
  testImplementation libs.assertj
}

jar {
  manifest {
    attributes(
        "Implementation-Title": project.name,
        "Implementation-Version": project.version,
        "Implementation-Vendor": "Tabular Technologies, Inc.",
        "Build-Timestamp": java.time.Instant.now().toString(),
        "Build-JDK": "${System.properties['java.version']} (${System.properties['java.vendor']} ${System.properties['java.vm.version']})",
        "Build-OS": "${System.properties['os.name']} ${System.properties['os.arch']} ${System.properties['os.version']}",
    )
  }
}

configurations {
  testImplementation.extendsFrom compileOnly
}

publishing {
  publications {
    mavenJava(MavenPublication) {
      from components.java
    }
  }
}
